<html><head><title>Cats</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Cats contributors" /><meta name="description" content="Lightweight, modular, and extensible library for functional programming" /><meta name="og:image" content="/cats/img/poster.png" /><meta name="og:title" content="Cats" /><meta name="og:site_name" content="Cats" /><meta name="og:url" content="http://typelevel.org/cats/" /><meta name="og:type" content="website" /><meta name="og:description" content="Lightweight, modular, and extensible library for functional programming" /><link rel="icon" type="image/png" href="/cats/img/favicon.png" /><meta name="twitter:title" content="Cats" /><meta name="twitter:image" content="http://typelevel.org/cats/img/poster.png" /><meta name="twitter:description" content="Lightweight, modular, and extensible library for functional programming" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/cats/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/cats/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/cats/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/cats/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/cats/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/cats/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/cats/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/cats/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/cats/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/cats/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/cats/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/cats/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/cats/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/cats/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/cats/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/cats/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/cats/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/cats/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/cats/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/cats/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/cats/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/cats/css/style.css" /><link rel="stylesheet" href="/cats/css/palette.css" /><link rel="stylesheet" href="/cats/css/codemirror.css" /><link rel="stylesheet" href="/cats/css/kazari-style.css" /><link rel="stylesheet" href="/cats/css/monokai.css" /><link rel="stylesheet" href="/cats/css/override.css" /></head><body><header id="site-header"><div class="navbar-wrapper navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/cats/" class="brand"><div class="icon-wrapper"><span>Cats</span></div></a></div><nav class="text-right"><ul class=""><li><a href="https://github.com/typelevel/cats"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li><li><a href="api/"><i class="fa fa-file-text"></i><span class="hidden-xs">Documentation</span></a></li></ul></nav></div></div><div class="jumbotron" style="background-image:url('/cats/img/jumbotron_pattern.png')"></div><div><ul class="horizontalNav">                                                                         <li><a class="" href="/cats/">Home</a></li>  <li><a class="" href="/cats/typeclasses.html">Type Classes</a></li>  <li><a class="" href="/cats/datatypes.html">Data Types</a></li>  <li><a class="" href="/cats/motivations.html">Motivations</a></li>  <li><a class="" href="/cats/resources_for_learners.html">Resources for Learners</a></li>  <li><a class=" active " href="/cats/faq.html">FAQ</a></li>  <li><a class="" href="/cats/contributing.html">Contributing</a></li>  <li><a class="" href="/cats/colophon.html">Colophon</a></li>  <li><a class="" href="/cats/guidelines.html">Guidelines</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><h1 id="frequently-asked-questions">Frequently Asked Questions</h1>

<h2 id="questions">Questions</h2>
<ul>
  <li><a href="#what-imports">What imports do I need?</a></li>
  <li><a href="#diff-scalaz">What is the difference between Cats and Scalaz?</a></li>
  <li><a href="#either">Where is right-biased <code class="highlighter-rouge">Either</code>?</a></li>
  <li><a href="#si-2712">Why is the compiler having trouble with types with more than one type parameter?</a></li>
  <li><a href="#future-instances">Why can’t the compiler find implicit instances for Future?</a></li>
  <li><a href="#example-compile">Why is some example code not compiling for me?</a></li>
  <li><a href="#traverse">How can I turn my List of <code class="highlighter-rouge">&lt;something&gt;</code> into a <code class="highlighter-rouge">&lt;something&gt;</code> of a list?</a></li>
  <li><a href="#listt">Where is <code class="highlighter-rouge">ListT</code>?</a></li>
  <li><a href="#task">Where is <code class="highlighter-rouge">IO</code>/<code class="highlighter-rouge">Task</code>?</a></li>
  <li><a href="#simulacrum">What does <code class="highlighter-rouge">@typeclass</code> mean?</a></li>
  <li><a href="#kind-projector">What do types like <code class="highlighter-rouge">?</code> and <code class="highlighter-rouge">λ</code> mean?</a></li>
  <li><a href="#machinist">What does <code class="highlighter-rouge">macro Ops</code> do? What is <code class="highlighter-rouge">cats.macros.Ops</code>?</a></li>
  <li><a href="#tailrecm">What is <code class="highlighter-rouge">tailRecM</code>?</a></li>
  <li><a href="#symbol">What does this symbol mean?</a></li>
  <li><a href="#law-testing">How can I test instances against their type classes’ laws?</a></li>
  <li><a href="#contributing">How can I help?</a></li>
</ul>

<h2 id="a-idwhat-imports-hrefwhat-importsawhat-imports-do-i-need"><a id="what-imports" href="#what-imports"></a>What imports do I need?</h2>

<p>The easiest approach to cats imports is to import everything that’s commonly needed:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats._</span>
<span class="k">import</span> <span class="nn">cats.data._</span>
<span class="k">import</span> <span class="nn">cats.implicits._</span>
</code></pre>
</div>

<p>This should be all that you need, but if you’d like to learn more about the details of imports than you can check out the <a href="typeclasses/imports.html">import guide</a>.</p>

<h2 id="a-iddiff-scalaz-hrefdiff-scalazawhat-is-the-difference-between-cats-and-scalaz"><a id="diff-scalaz" href="#diff-scalaz"></a>What is the difference between Cats and Scalaz?</h2>

<p>Cats and <a href="https://github.com/scalaz/scalaz">Scalaz</a> have the same goal: to facilitate pure functional programming in Scala applications. However the underlying core strategy is different; Scalaz took the approach of trying to provide a single batteries-included <em>standard library</em> for FP that powers the Scala applications. Cats, on the other hand, aims to help build an <a href="/cats/#ecosystem">ecosystem</a> of pure FP libraries by providing a solid and stable foundation; these libraries can have their own styles and personalities, competing with each other, while at the same time playing nice. It is through this ecosystem of FP libraries (cats included) that Scala applications can be powered with “FP awesome-ness” and beyond by picking whatever best fit their needs.</p>

<p>Based on this core strategy, Cats takes a <a href="/cats/motivations#modularity">modular</a> approach and focuses on providing core, <a href="/cats/#binary-compatibility-and-versioning">binary compatible</a>, <a href="/cats/motivations#approachability">approachable</a> and <a href="/cats/motivations#efficiency">efficient</a> abstractions. It provides a welcoming and supportive environment for the <a href="https://gitter.im/typelevel/cats">user community</a> governed by the <a href="https://typelevel.org/conduct">typelevel code of conduct</a>. It also takes great effort in supplying a comprehensive and beginner-friendly <a href="/cats/#documentation">documentation</a>.</p>

<h2 id="a-ideither-hrefeitherawhere-is-right-biased-either"><a id="either" href="#either"></a>Where is right-biased Either?</h2>
<p>Up through Cats 0.7.x we had <code class="highlighter-rouge">cats.data.Xor</code>, which was effectively <code class="highlighter-rouge">scala.util.Either</code>, but right-biased by default and with
a bunch of useful combinators around it. In Scala 2.12.x <code class="highlighter-rouge">Either</code>
<a href="https://github.com/scala/scala/pull/5135">became right-biased</a> so we revisited the use of <code class="highlighter-rouge">Xor</code> and
<a href="https://github.com/typelevel/cats/issues/1192">decided</a> that in the interest of interoperability, we would remove <code class="highlighter-rouge">Xor</code> in the Cats 0.8.0 release and
fill in the gaps in the <code class="highlighter-rouge">scala.util.Either</code> API via
<a href="https://github.com/typelevel/cats/blob/master/core/src/main/scala/cats/syntax/either.scala">syntax enrichment</a>.</p>

<p>This syntax and the type class instances for <code class="highlighter-rouge">Either</code> can be imported using <code class="highlighter-rouge">cats.implicits._</code>, which will also bring in syntactic enrichment and instances for other standard library types, or you can import them individually with <code class="highlighter-rouge">cats.syntax.either._</code> and <code class="highlighter-rouge">cats.instances.either._</code>.</p>

<p>There are a few minor mismatches between <code class="highlighter-rouge">Xor</code> and <code class="highlighter-rouge">Either</code>. For example, in some cases you may need to specify a type parameter for an enrichment method on <code class="highlighter-rouge">Either</code> (such as <code class="highlighter-rouge">leftMap</code>) even though it was properly inferred for <code class="highlighter-rouge">Xor</code>. See the <a href="http://typelevel.org/cats/datatypes/either.html#either-in-the-small-either-in-the-large"><code class="highlighter-rouge">Either</code> section of this guide</a> for more information about these issues.</p>

<p>Similarly, <code class="highlighter-rouge">cats.data.XorT</code> has been replaced with <code class="highlighter-rouge">cats.data.EitherT</code>, although since this is a type defined in Cats, you don’t need to import syntax or instances for it (although you may need imports for the underlying monad).</p>

<h2 id="a-idsi-2712-hrefsi-2712awhy-is-the-compiler-having-trouble-with-types-with-more-than-one-type-parameter"><a id="si-2712" href="#si-2712"></a>Why is the compiler having trouble with types with more than one type parameter?</h2>

<p>When you encounter a situation where the same code works fine with a type with one type parameter, e.g. List[A], but doesn’t work with types with more than one, e.g. Either[A, B], you probably hit <a href="https://issues.scala-lang.org/browse/SI-2712">SI-2712</a>. Without going into the details, it’s highly recommended to enable a partial SI-2712 fix in your project. The easiest way to achieve that is through this <a href="https://github.com/fiadliel/sbt-partial-unification">sbt plugin</a>.
Cats used to provide mitigation to this issue semi-transparently, but given the fact that the fix is now mainstream, we decided to drop that mitigation machinery in favor of reducing the complexity. See this <a href="https://github.com/typelevel/cats/issues/1073">issue</a> for details.</p>

<h2 id="a-idexample-compile-hrefexample-compileawhy-is-some-example-code-not-compiling-for-me"><a id="example-compile" href="#example-compile"></a>Why is some example code not compiling for me?</h2>

<p>A portion of example code requires either the <a href="https://github.com/non/kind-projector">Kind-projector</a> compiler plugin or partial unification turned on in scalac. The easiest way to turn partial unification on is through this <a href="https://github.com/fiadliel/sbt-partial-unification">sbt plugin</a>.</p>

<h2 id="a-idfuture-instances-hreffuture-instancesawhy-cant-the-compiler-find-implicit-instances-for-future"><a id="future-instances" href="#future-instances"></a>Why can’t the compiler find implicit instances for Future?</h2>

<p>If you have already followed the <a href="#what-imports">imports advice</a> but are still getting error messages like <code class="highlighter-rouge">could not find implicit value for parameter e: cats.Monad[scala.concurrent.Future]</code> or <code class="highlighter-rouge">value |+| is not a member of scala.concurrent.Future[Int]</code>, then make sure that you have an implicit <code class="highlighter-rouge">scala.concurrent.ExecutionContext</code> in scope. The easiest way to do this is to <code class="highlighter-rouge">import scala.concurrent.ExecutionContext.Implicits.global</code>, but note that you may want to use a different execution context for your production application.</p>

<h2 id="a-idtraverse-hreftraverseahow-can-i-turn-my-list-of-something-into-a-something-of-a-list"><a id="traverse" href="#traverse"></a>How can I turn my List of <code class="highlighter-rouge">&lt;something&gt;</code> into a <code class="highlighter-rouge">&lt;something&gt;</code> of a list?</h2>

<p>It’s really common to have a <code class="highlighter-rouge">List</code> of values with types like <code class="highlighter-rouge">Option</code>, <code class="highlighter-rouge">Either</code>, or <code class="highlighter-rouge">Validated</code> that you would like to turn “inside out” into an <code class="highlighter-rouge">Option</code> (or <code class="highlighter-rouge">Either</code> or <code class="highlighter-rouge">Validated</code>) of a <code class="highlighter-rouge">List</code>. The <code class="highlighter-rouge">sequence</code> and <code class="highlighter-rouge">traverse</code> methods are <em>really</em> handy for this. You can read more about them in the <a href="/cats/typeclasses/traverse.html">Traverse documentation</a>.</p>

<h2 id="a-idlistt-hreflisttawhere-is-listt"><a id="listt" href="#listt"></a>Where is ListT?</h2>

<p>There are monad transformers for various types, such as <a href="/cats/datatypes/optiont.html">OptionT</a>, so people often wonder why there isn’t a <code class="highlighter-rouge">ListT</code>. For example, in the following example, people might reach for <code class="highlighter-rouge">ListT</code> to simplify making nested <code class="highlighter-rouge">map</code> and <code class="highlighter-rouge">exists</code> calls:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">l</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">))</span>

<span class="k">def</span> <span class="n">isEven</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre>
</div>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">l</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">_</span> <span class="o">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="c1">// res1: Option[List[Int]] = Some(List(2, 3, 4, 5, 6))
</span>
<span class="n">l</span><span class="o">.</span><span class="n">exists</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">exists</span><span class="o">(</span><span class="n">isEven</span><span class="o">))</span>
<span class="c1">// res2: Boolean = true
</span></code></pre>
</div>

<p>A naive implementation of <code class="highlighter-rouge">ListT</code> suffers from associativity issues; see <a href="https://gist.github.com/tpolecat/1227e22e3161b5816e014c00650f3b57">this gist</a> for an example. It’s possible to create a <code class="highlighter-rouge">ListT</code> that doesn’t have these issues, but it tends to be pretty inefficient. For many use-cases, <a href="https://github.com/typelevel/cats/blob/master/core/src/main/scala/cats/data/Nested.scala">Nested</a> can be used to achieve the desired results.</p>

<p>Here is how we could achieve the effect of the previous example using <code class="highlighter-rouge">Nested</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.data.Nested</span>
<span class="k">import</span> <span class="nn">cats.implicits._</span>
</code></pre>
</div>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">nl</span> <span class="k">=</span> <span class="nc">Nested</span><span class="o">(</span><span class="n">l</span><span class="o">)</span>
<span class="c1">// nl: cats.data.Nested[Option,List,Int] = Nested(Some(List(1, 2, 3, 4, 5)))
</span>
<span class="n">nl</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">_</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="c1">// res3: cats.data.Nested[Option,List,Int] = Nested(Some(List(2, 3, 4, 5, 6)))
</span>
<span class="n">nl</span><span class="o">.</span><span class="n">exists</span><span class="o">(</span><span class="n">isEven</span><span class="o">)</span>
<span class="c1">// res4: Boolean = true
</span></code></pre>
</div>

<p>We can even perform more complicated operations, such as a <code class="highlighter-rouge">traverse</code> of the nested structure:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.data.ValidatedNel</span>
<span class="k">type</span> <span class="kt">ErrorsOr</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ValidatedNel</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">A</span><span class="o">]</span>
<span class="k">def</span> <span class="n">even</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">ErrorsOr</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="n">i</span><span class="o">.</span><span class="n">validNel</span> <span class="k">else</span> <span class="n">s</span><span class="s">"$i is odd"</span><span class="o">.</span><span class="n">invalidNel</span>

<span class="o">```</span><span class="n">scala</span>
<span class="n">nl</span><span class="o">.</span><span class="n">traverse</span><span class="o">(</span><span class="n">even</span><span class="o">)</span>
<span class="c1">// res6: ErrorsOr[cats.data.Nested[Option,List,Int]] = Invalid(NonEmptyList(1 is odd, 3 is odd, 5 is odd))
</span></code></pre>
</div>

<h2 id="a-idtask-hreftaskawhere-is-iotask"><a id="task" href="#task"></a>Where is IO/Task?</h2>

<p>In purely functional programming, a monadic <code class="highlighter-rouge">IO</code> or <code class="highlighter-rouge">Task</code> type is often used to handle side effects such as file/network IO. In some languages and frameworks, such a type also serves as the primary abstraction through which parallelism is achieved.  Nearly every real-world purely functional application or service is going to require such a data type, and this gives rise to an obvious question: why doesn’t cats include such a type?</p>

<p>The answer is that cats <em>does</em> include an <code class="highlighter-rouge">IO</code>, it just isn’t included in the core library.  The decision was made to split <code class="highlighter-rouge">IO</code> away from cats-core and (indeed the whole cats release cycle!) in order to make it easier to ensure modular versioning and compatibility across the ecosystem.  The <a href="https://github.com/typelevel/cats-effect">cats-effect</a> project defines a type, <code class="highlighter-rouge">cats.effect.IO</code>, which is intended to be a very minimal, very performant data type for managing synchronous and asynchronous side-effects, integrated into the cats ecosystem.</p>

<p>However, we acknowledge that this type may not meet everyone’s needs.  Notably, <code class="highlighter-rouge">cats.effect.IO</code> does not provide any mechanism for achieving parallel computation (though such functionality can be built on top of it, which is what libraries like <a href="https://github.com/functional-streams-for-scala/fs2">fs2</a> achieve).  For these and other needs, we would invite you to consider one of the other <code class="highlighter-rouge">Task</code>-like data types within the cats ecosystem, such as <a href="https://monix.io">Monix’s <code class="highlighter-rouge">Task</code></a>.  The cats-effect project characterizes the space of side-effect-capturing data types with a set of typeclasses (deriving from <code class="highlighter-rouge">cats.Monad</code>), and so all such data types are, broadly-speaking, mutually compatible and interchangeable in many generic contexts.</p>

<p>It may be worth keeping in mind that <code class="highlighter-rouge">IO</code> and <code class="highlighter-rouge">Task</code> are pretty blunt instruments (they are essentially the <code class="highlighter-rouge">Any</code> of side effect management), and you may want to narrow the scope of your effects throughout most of your application. The <a href="/cats/datatypes/freemonad.html">free monad</a> documentation describes a way to abstractly define controlled effects and interpret them into a type such as <code class="highlighter-rouge">IO</code> or <code class="highlighter-rouge">Task</code> as late as possible. As more of your code becomes pure through these controlled effects the less it matters which type you end up choosing to represent your side effects.</p>

<h2 id="a-idsimulacrum-hrefsimulacrumawhat-does-typeclass-mean"><a id="simulacrum" href="#simulacrum"></a>What does <code class="highlighter-rouge">@typeclass</code> mean?</h2>

<p>Cats defines and implements numerous type classes. Unfortunately, encoding these type classes in Scala can incur a large amount of boilerplate. To address this, <a href="https://github.com/mpilquist/simulacrum">Simulacrum</a> introduces <code class="highlighter-rouge">@typeclass</code>, a macro annotation which generates a lot of this boilerplate. This elevates type classes to a first class construct and increases the legibility and maintainability of the code. Use of simulacrum also ensures consistency in how the type classes are encoded across a project. Cats uses simulacrum wherever possible to encode type classes, and you can read more about it at the <a href="https://github.com/mpilquist/simulacrum">project page</a>.</p>

<p>Note that the one area where simulacrum is intentionally not used is in the <code class="highlighter-rouge">cats-kernel</code> module. The <code class="highlighter-rouge">cats-kernel</code> module is intended to be a shared dependency for a number of projects, and as such, it is important that it is both lightweight and very stable from a binary compatibility perspective. At some point there may be a transition from simulacrum to <a href="https://github.com/typelevel/typeclassic">typeclassic</a>, and the binary compatibility of moving between simulacrum and typeclassic is unclear at this point. Avoiding the dependency on simulacrum in <code class="highlighter-rouge">cats-kernel</code>, provides insulation against any potential binary compatibility problems in such a transition.</p>

<h2 id="a-idkind-projector-hrefkind-projectorawhat-do-types-like--and--mean"><a id="kind-projector" href="#kind-projector"></a>What do types like <code class="highlighter-rouge">?</code> and <code class="highlighter-rouge">λ</code> mean?</h2>

<p>Cats defines a wealth of type classes and type class instances. For a number of the type class and instance combinations, there is a mismatch between the type parameter requirements of the type class and the type parameter requirements of the data type for which the instance is being defined. For example, the <a href="/cats/datatypes/either.html">Either</a> data type is a type constructor with two type parameters. We would like to be able to define a <a href="/cats/typeclasses/monad.html">Monad</a> for <code class="highlighter-rouge">Either</code>, but the <code class="highlighter-rouge">Monad</code> type class operates on type constructors having only one type parameter.</p>

<p><strong>Enter type lambdas!</strong> Type lambdas provide a mechanism to allow one or more of the type parameters for a particular type constructor to be fixed. In the case of <code class="highlighter-rouge">Either</code> then, when defining a <code class="highlighter-rouge">Monad</code> for <code class="highlighter-rouge">Either</code>, we want to fix one of the type parameters at the point where a <code class="highlighter-rouge">Monad</code> instance is summoned, so that the type parameters line up. As <code class="highlighter-rouge">Either</code> is right biased, a type lambda can be used to fix the left type parameter and allow the right type parameter to continue to vary when <code class="highlighter-rouge">Either</code> is treated as a <code class="highlighter-rouge">Monad</code>. The right biased nature of <code class="highlighter-rouge">Either</code> is discussed further in the <a href="/cats/datatypes/either.html"><code class="highlighter-rouge">Either</code> documentation</a>.</p>

<p><strong>Enter <a href="https://github.com/non/kind-projector">kind-projector</a>!</strong> kind-projector is a compiler plugin which provides a convenient syntax for dealing with type lambdas. The symbols <code class="highlighter-rouge">?</code> and <code class="highlighter-rouge">λ</code> are treated specially by kind-projector, and expanded into the more verbose definitions that would be required were it not to be used. You can read more about kind-projector at the <a href="https://github.com/non/kind-projector">project page</a>.</p>

<h2 id="a-idmachinist-hrefmachinistawhat-does-macro-ops-do-what-is-catsmacrosops"><a id="machinist" href="#machinist"></a>What does <code class="highlighter-rouge">macro Ops</code> do? What is <code class="highlighter-rouge">cats.macros.Ops</code>?</h2>

<p><code class="highlighter-rouge">macro Ops</code> invokes the <a href="https://github.com/typelevel/machinist">Machinist</a> Ops macro, and is used in cats in a number of places to enrich types with operations with the minimal possible cost when those operations are called in code. Machinist supports an extension mechanism where users of the macro can provide a mapping between symbolic operator names and method names. The <code class="highlighter-rouge">cats.macros.Ops</code> class uses this extension mechanism to supply the set of mappings that the cats project is interested in.</p>

<p>More about the history of machinist and how it works can be discovered at the <a href="https://github.com/typelevel/machinist">project page</a>, or <a href="http://typelevel.org/blog/2013/10/13/spires-ops-macros.html">this article on the typelevel blog</a>.</p>

<h2 id="a-idtailrecm-hreftailrecmawhat-is-tailrecm"><a id="tailrecm" href="#tailrecm"></a>What is <code class="highlighter-rouge">tailRecM</code>?</h2>

<p>The <code class="highlighter-rouge">FlatMap</code> type class has a <code class="highlighter-rouge">tailRecM</code> method with the following signature:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">tailRecM</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">F</span><span class="o">[</span><span class="kt">Either</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
</code></pre>
</div>

<p>When you are defining a <code class="highlighter-rouge">FlatMap</code> instance, its <code class="highlighter-rouge">tailRecM</code> implementation must have two properties in order for the instance to be considered lawful. The first property is that <code class="highlighter-rouge">tailRecM</code> must return the same result that you would get if you recursively called <code class="highlighter-rouge">flatMap</code> until you got a <code class="highlighter-rouge">Right</code> value (assuming you had unlimited stack space—we’ll get to that in a moment). In other words, it must give the same result as this implementation:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">Monad</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">pure</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">F</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>

  <span class="k">def</span> <span class="n">tailRecM</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">F</span><span class="o">[</span><span class="kt">Either</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">flatMap</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">))</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nc">Right</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">pure</span><span class="o">(</span><span class="n">b</span><span class="o">)</span>
      <span class="k">case</span> <span class="nc">Left</span><span class="o">(</span><span class="n">nextA</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">tailRecM</span><span class="o">(</span><span class="n">nextA</span><span class="o">)(</span><span class="n">f</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The reason we can’t simply use this implementation for all type constructors (and the reason that <code class="highlighter-rouge">tailRecM</code> is useful at all) is that for many monadic types, recursively <code class="highlighter-rouge">flatMap</code>-ing in this way will quickly exhaust the stack.</p>

<p><code class="highlighter-rouge">Option</code> is one example of a monadic type whose <code class="highlighter-rouge">flatMap</code> consumes stack in such a way that nesting <code class="highlighter-rouge">flatMap</code> calls deeply enough (usually around a couple thousand levels) will result in a stack overflow. We can provide a stack-safe <code class="highlighter-rouge">tailRecM</code> implementation for <code class="highlighter-rouge">Option</code>, though:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.FlatMap</span>
<span class="k">import</span> <span class="nn">scala.annotation.tailrec</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">optionFlatMap</span><span class="k">:</span> <span class="kt">FlatMap</span><span class="o">[</span><span class="kt">Option</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">FlatMap</span><span class="o">[</span><span class="kt">Option</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="n">fa</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">f</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="n">fa</span><span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">f</span><span class="o">)</span>

  <span class="nd">@tailrec</span>
  <span class="k">def</span> <span class="n">tailRecM</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Either</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="nc">None</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Left</span><span class="o">(</span><span class="n">a1</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="n">tailRecM</span><span class="o">(</span><span class="n">a1</span><span class="o">)(</span><span class="n">f</span><span class="o">)</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Right</span><span class="o">(</span><span class="n">b</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="nc">Some</span><span class="o">(</span><span class="n">b</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Now we don’t have to worry about overflowing the stack, no matter how many times we have to call <code class="highlighter-rouge">tailRecM</code> before we get a <code class="highlighter-rouge">Right</code>.</p>

<p>This is useful because any operation that you would write using recursive <code class="highlighter-rouge">flatMap</code>s can be rewritten to use <code class="highlighter-rouge">tailRecM</code>, and if the <code class="highlighter-rouge">FlatMap</code> instance for your type constructor is lawful, you don’t have to worry about stack safety.</p>

<p>The downside is that how you write a lawful <code class="highlighter-rouge">tailRecM</code> for your type constructor may not always be obvious. For some type constructors, such as <code class="highlighter-rouge">Future</code>, recursively <code class="highlighter-rouge">flatMap</code>-ing is already safe, and the first simple implementation above will be lawful. For types like <code class="highlighter-rouge">Option</code> and <code class="highlighter-rouge">Try</code>, you’ll need to arrange the recursion in such a way that the <code class="highlighter-rouge">tailRecM</code> calls are tail calls (which you can confirm with Scala’s <code class="highlighter-rouge">tailrec</code> annotation). Collection types require yet another approach (see for example the <a href="https://github.com/typelevel/cats/pull/1041/files#diff-e4d8b82ab5544972195d955591ffe18cR31">implementation for <code class="highlighter-rouge">List</code></a>).</p>

<p>If you’re having trouble figuring out how to implement <code class="highlighter-rouge">tailRecM</code> lawfully, you can try to find an instance in Cats itself for a type that is semantically similar to yours (all of the <code class="highlighter-rouge">FlatMap</code> instances provided by Cats have lawful, stack-safe <code class="highlighter-rouge">tailRecM</code> implementations).</p>

<p>In some cases you may decide that providing a lawful <code class="highlighter-rouge">tailRecM</code> may be impractical or even impossible (if so we’d like to hear about it). For these cases we provide a way of testing all of the monad laws <em>except</em> for the stack safety of <code class="highlighter-rouge">tailRecM</code>: just replace <code class="highlighter-rouge">MonadTests[F].monad[A, B, C]</code> in your tests with <code class="highlighter-rouge">MonadTests[F].stackUnsafeMonad[A, B, C]</code>.</p>

<h2 id="a-idsymbol-hrefsymbolawhat-does-this-symbol-mean"><a id="symbol" href="#symbol"></a>What does this symbol mean?</h2>

<p>Below is a list of symbols used in cats.</p>

<p>The <code class="highlighter-rouge">~&gt;</code>, <code class="highlighter-rouge">⊥</code>, <code class="highlighter-rouge">⊤</code>, <code class="highlighter-rouge">:&lt;:</code> and <code class="highlighter-rouge">:≺:</code> symbols can be imported with <code class="highlighter-rouge">import cats._</code>.</p>

<p>All other symbols can be imported with <code class="highlighter-rouge">import cats.implicits._</code></p>

<table>
  <thead>
    <tr>
      <th>Symbol</th>
      <th>Name</th>
      <th>Nickname</th>
      <th>Type Class</th>
      <th>Signature</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">fa *&gt; fb</code></td>
      <td>followed by</td>
      <td> </td>
      <td><code class="highlighter-rouge">Apply[F[_]]</code></td>
      <td><code class="highlighter-rouge">followedBy(fa: F[A])(fb: F[B]): F[B]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">fa &lt;* fb</code></td>
      <td>for effect</td>
      <td> </td>
      <td><code class="highlighter-rouge">Apply[F[_]]</code></td>
      <td><code class="highlighter-rouge">forEffect(fa: F[A])(fb: F[B]): F[A]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x === y</code></td>
      <td>equals</td>
      <td> </td>
      <td><code class="highlighter-rouge">Eq[A]</code></td>
      <td><code class="highlighter-rouge">eqv(x: A, y: A): Boolean</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x =!= y</code></td>
      <td>not equals</td>
      <td> </td>
      <td><code class="highlighter-rouge">Eq[A]</code></td>
      <td><code class="highlighter-rouge">neqv(x: A, y: A): Boolean</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">fa &gt;&gt;= f</code></td>
      <td>flatMap</td>
      <td> </td>
      <td><code class="highlighter-rouge">FlatMap[F[_]]</code></td>
      <td><code class="highlighter-rouge">flatMap(fa: F[A])(f: A =&gt; F[B]): F[B]</code></td>
    </tr>
    <tr>
      <td><code>x &#124;-&#124; y</code></td>
      <td>remove</td>
      <td> </td>
      <td><code class="highlighter-rouge">Group[A]</code></td>
      <td><code class="highlighter-rouge">remove(x: A, y: A): A</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x &gt; y</code></td>
      <td>greater than</td>
      <td> </td>
      <td><code class="highlighter-rouge">PartialOrder[A]</code></td>
      <td><code class="highlighter-rouge">gt(x: A, y: A): Boolean</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x &gt;= y</code></td>
      <td>greater than or equal</td>
      <td> </td>
      <td><code class="highlighter-rouge">PartialOrder[A]</code></td>
      <td><code class="highlighter-rouge">gteq(x: A, y: A): Boolean</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x &lt; y</code></td>
      <td>less than</td>
      <td> </td>
      <td><code class="highlighter-rouge">PartialOrder[A]</code></td>
      <td><code class="highlighter-rouge">lt(x: A, y: A): Boolean</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x &lt;= y</code></td>
      <td>less than or equal</td>
      <td> </td>
      <td><code class="highlighter-rouge">PartialOrder[A]</code></td>
      <td><code class="highlighter-rouge">lteq(x: A, y: A): Boolean</code></td>
    </tr>
    <tr>
      <td><code>x &#124;+&#124; y</code></td>
      <td>Semigroup combine</td>
      <td> </td>
      <td><code class="highlighter-rouge">Semigroup[A]</code></td>
      <td><code class="highlighter-rouge">combine(x: A, y: A): A</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">x &lt;+&gt; y</code></td>
      <td>SemigroupK combine</td>
      <td> </td>
      <td><code class="highlighter-rouge">SemigroupK[F[_]]</code></td>
      <td><code class="highlighter-rouge">combineK(x: F[A], y: F[A]): F[A]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">f &lt;&lt;&lt; g</code></td>
      <td>Arrow compose</td>
      <td> </td>
      <td><code class="highlighter-rouge">Compose[F[_, _]]</code></td>
      <td><code class="highlighter-rouge">compose(f: F[B, C], g: F[A, B]): F[A, C]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">f &gt;&gt;&gt; g</code></td>
      <td>Arrow andThen</td>
      <td> </td>
      <td><code class="highlighter-rouge">Compose[F[_, _]]</code></td>
      <td><code class="highlighter-rouge">andThen(f: F[B, C], g: F[A, B]): F[A, C]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">F ~&gt; G</code></td>
      <td>natural transformation</td>
      <td> </td>
      <td><code class="highlighter-rouge">FunctionK[F[_], G[_]]</code></td>
      <td><code class="highlighter-rouge">FunctionK</code> alias</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">F :&lt;: G</code></td>
      <td>injectK</td>
      <td> </td>
      <td><code class="highlighter-rouge">InjectK[F[_], G[_]]</code></td>
      <td><code class="highlighter-rouge">InjectK</code> alias</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">F :≺: G</code></td>
      <td>injectK</td>
      <td> </td>
      <td><code class="highlighter-rouge">InjectK[F[_], G[_]]</code></td>
      <td><code class="highlighter-rouge">InjectK</code> alias</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">⊥</code></td>
      <td>bottom</td>
      <td> </td>
      <td>N/A</td>
      <td><code class="highlighter-rouge">Nothing</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">⊤</code></td>
      <td>top</td>
      <td> </td>
      <td>N/A</td>
      <td><code class="highlighter-rouge">Any</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">fa &gt;&gt; fb</code> (Deprecated)</td>
      <td>followed by</td>
      <td> </td>
      <td><code class="highlighter-rouge">FlatMap[F[_]]</code></td>
      <td><code class="highlighter-rouge">followedBy(fa: F[A])(fb: F[B]): F[B]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">fa &lt;&lt; fb</code> (Deprecated)</td>
      <td>for effect</td>
      <td> </td>
      <td><code class="highlighter-rouge">FlatMap[F[_]]</code></td>
      <td><code class="highlighter-rouge">forEffect(fa: F[A])(fb: F[B]): F[A]</code></td>
    </tr>
  </tbody>
</table>

<h2 id="a-idlaw-testing-hreflaw-testingahow-can-i-test-instances-against-their-type-classes-laws"><a id="law-testing" href="#law-testing"></a>How can I test instances against their type classes’ laws?</h2>

<p>You can find more information <a href="typeclasses/lawtesting.html">here</a>.</p>

<h2 id="a-idcontributing-hrefcontributingahow-can-i-help"><a id="contributing" href="#contributing"></a>How can I help?</h2>

<p>The cats community welcomes and encourages contributions, even if you are completely new to cats and functional programming. Here are a few ways to help out:</p>

<ul>
  <li>Find an undocumented method and write a ScalaDoc entry for it. See <a href="/core/src/main/scala/cats/arrow/Arrow.scala">Arrow.scala</a> for some examples of ScalaDoc entries that use <a href="https://github.com/tkawachi/sbt-doctest">sbt-doctest</a>.</li>
  <li>Look at the <a href="https://codecov.io/github/typelevel/cats?branch=master">code coverage report</a>, find some untested code, and write a test for it. Even simple helper methods and syntax enrichment should be tested.</li>
  <li>Find an <a href="https://github.com/typelevel/cats/issues?q=is%3Aopen+is%3Aissue+label%3Aready">open issue</a>, leave a comment on it to let people know you are working on it, and submit a pull request. If you are new to cats, you may want to look for items with the <a href="https://github.com/typelevel/cats/issues?q=is%3Aopen+is%3Aissue+label%3A%22low-hanging+fruit%22">low-hanging-fruit</a> label.</li>
</ul>

<p>See the <a href="/cats/contributing.html">contributing guide</a> for more information.</p>
</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>Cats is designed and developed by <a href="https://github.com/typelevel/cats" target="_blank">Cats contributors</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/typelevel/cats"><span class="fa fa-github"></span>View on GitHub</a></p></div></div><div class="row"><div class="col-xs-6">
<p>© 2017 <a href="https://github.com/typelevel/cats#maintainers">The Cats Maintainers</a></p>
<p style="font-size: 80%; margin-top: 10px">Website built with <a href="https://47deg.github.io/sbt-microsites/">sbt-microsites © 2016 47 Degrees</a></p>
</div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/cats/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'typelevel/cats'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script></body></html>