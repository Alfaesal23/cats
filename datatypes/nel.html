<html><head><title>Cats</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Cats contributors" /><meta name="description" content="Lightweight, modular, and extensible library for functional programming" /><meta name="og:image" content="/cats/img/poster.png" /><meta name="og:title" content="Cats" /><meta name="og:site_name" content="Cats" /><meta name="og:url" content="http://typelevel.org/cats/" /><meta name="og:type" content="website" /><meta name="og:description" content="Lightweight, modular, and extensible library for functional programming" /><link rel="icon" type="image/png" href="/cats/img/favicon.png" /><meta name="twitter:title" content="Cats" /><meta name="twitter:image" content="http://typelevel.org/cats/img/poster.png" /><meta name="twitter:description" content="Lightweight, modular, and extensible library for functional programming" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/cats/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/cats/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/cats/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/cats/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/cats/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/cats/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/cats/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/cats/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/cats/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/cats/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/cats/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/cats/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/cats/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/cats/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/cats/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/cats/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/cats/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/cats/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/cats/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/cats/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/cats/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/cats/css/style.css" /><link rel="stylesheet" href="/cats/css/palette.css" /><link rel="stylesheet" href="/cats/css/codemirror.css" /><link rel="stylesheet" href="/cats/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/cats/" class="brand"><div class="brand-wrapper"><span>Cats</span></div></a></li>                <li><a href="/cats/datatypes.html" class="">Data Types</a></li> <li><a href="/cats/datatypes/const.html" class="">Const</a></li> <li><a href="/cats/datatypes/either.html" class="">Either</a></li> <li><a href="/cats/datatypes/eval.html" class="">Eval</a></li> <li><a href="/cats/datatypes/freeapplicative.html" class="">FreeApplicatives</a></li> <li><a href="/cats/datatypes/freemonad.html" class="">FreeMonads</a></li> <li><a href="/cats/datatypes/functionk.html" class="">FunctionK</a></li> <li><a href="/cats/datatypes/id.html" class="">Id</a></li> <li><a href="/cats/datatypes/ior.html" class="">Ior</a></li> <li><a href="/cats/datatypes/kleisli.html" class="">Kleisli</a></li> <li><a href="/cats/datatypes/nel.html" class=" active ">NonEmptyList</a></li> <li><a href="/cats/datatypes/oneand.html" class="">OneAnd</a></li> <li><a href="/cats/datatypes/optiont.html" class="">OptionT</a></li> <li><a href="/cats/datatypes/eithert.html" class="">EitherT</a></li> <li><a href="/cats/datatypes/iort.html" class="">IorT</a></li> <li><a href="/cats/datatypes/state.html" class="">State</a></li> <li><a href="/cats/datatypes/validated.html" class="">Validated</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/typelevel/cats"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/typelevel/cats"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('Cats Lightweight, modular, and extensible library for functional programming');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('Cats Lightweight, modular, and extensible library for functional programming');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="typelevel" data-github-repo="cats"><div class="content-wrapper"><section><h1 id="nonemptylist">NonEmptyList</h1>

<h2 id="motivation">Motivation</h2>

<p>We start with two examples of <code class="highlighter-rouge">NonEmptyList</code>s</p>

<h3 id="usage-in-validated-and-ior">Usage in <code class="highlighter-rouge">Validated</code> and <code class="highlighter-rouge">Ior</code></h3>

<p>If you have had the opportunity of taking a look to
<a href="validated.html">Validated</a> or <a href="ior.html">Ior</a>, you’ll find that a
common case is to use <code class="highlighter-rouge">NonEmptyList</code> with one of these data
structures.</p>

<p>Why? Because it fits nicely in the error reporting cases. As stated by
its name, <code class="highlighter-rouge">NonEmptyList</code> is a <em>specialized</em> data type that has at
least <em>one</em> element.  Otherwise it behaves like a normal <code class="highlighter-rouge">List</code>.  For
sum types like <code class="highlighter-rouge">Validated</code> (and <code class="highlighter-rouge">Ior</code>), it does not make sense to have
a <code class="highlighter-rouge">Invalid</code> with no errors: no errors means it is a <code class="highlighter-rouge">Valid</code>!  By using
<code class="highlighter-rouge">NonEmptyList</code>, we explicitly say in the type that:</p>

<p><em>If</em> it is a <code class="highlighter-rouge">Invalid</code>, <em>then</em> there is at least one error.</p>

<p>This is much more precise and we don’t have to wonder whether the list
of errors might be empty when reporting them later on.</p>

<h3 id="avoiding-option-by-demanding-more-specific-arguments">Avoiding <code class="highlighter-rouge">Option</code> by demanding more specific arguments</h3>

<p>As functional programmers, we naturally shy away from partial
functions that can throw exceptions like the famous <code class="highlighter-rouge">head</code> method on,
e.g., <code class="highlighter-rouge">List</code>.</p>

<p>Let’s take as an example a method that calculates the <code class="highlighter-rouge">average</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">average</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">xs</span><span class="o">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">toDouble</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Clearly, this is not a valid definition for <em>empty</em> lists, because
division by zero will throw an exception.  To fix this, one way is to
return an <code class="highlighter-rouge">Option</code> instead of a <code class="highlighter-rouge">Double</code> right away:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">average</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">xs</span><span class="o">.</span><span class="n">isEmpty</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">None</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="nc">Some</span><span class="o">(</span><span class="n">xs</span><span class="o">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">toDouble</span><span class="o">)</span>
<span class="o">}</span>
</code></pre>
</div>

<p>That works and is safe, but this only masks the problem of <em>accepting
invalid input</em>.  By using <code class="highlighter-rouge">Option</code>, we extend the <code class="highlighter-rouge">average</code> function
with the logic to handle empty lists.  Additionally, all callers have
to handle the <code class="highlighter-rouge">Option</code> cases, maybe over and over again.  While better
than failing with an exception, this is far from perfect.</p>

<p>Instead what we would like to express is that <code class="highlighter-rouge">average</code> does not make
sense at all for an empty list.  Luckily, cats defines the
<code class="highlighter-rouge">NonEmptyList</code>.  As the name says, this represents a list that
<em>cannot</em>, by construction, be empty.  So given a <code class="highlighter-rouge">NonEmptyList[A]</code> you
can be sure that there is at least one <code class="highlighter-rouge">A</code> in there.</p>

<p>Let’s see how that impacts your <code class="highlighter-rouge">average</code> method:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.data.NonEmptyList</span>
<span class="k">def</span> <span class="n">average</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">NonEmptyList</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">xs</span><span class="o">.</span><span class="n">reduceLeft</span><span class="o">(</span><span class="k">_</span><span class="o">+</span><span class="k">_</span><span class="o">)</span> <span class="o">/</span> <span class="n">xs</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">toDouble</span>
<span class="o">}</span>
</code></pre>
</div>

<p>With that, <code class="highlighter-rouge">average</code> is free of any “domain invariant validation” and
instead can focus on the actual logic of computing the average of the
list.  This ties in nicely with the recommendation of shifting your
validation to the very borders of your program, where the input enters
your system.</p>

<h2 id="structure-of-a-nonemptylist">Structure of a NonEmptyList</h2>

<p><code class="highlighter-rouge">NonEmptyList</code> is defined as follows:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">final</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">NonEmptyList</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">head</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">tail</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="o">{</span>
  <span class="c1">// Implementation elided
</span><span class="o">}</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">head</code> of the <code class="highlighter-rouge">NonEmptyList</code> will be <em>non-empty</em>. Meanwhile, the
<code class="highlighter-rouge">tail</code> can have zero or more elements contained in a <code class="highlighter-rouge">List</code>.</p>

<h2 id="defined-for-all-its-elements">Defined for all its elements</h2>

<p>An important trait of <code class="highlighter-rouge">NonEmptyList</code> is the totality. For <code class="highlighter-rouge">List</code> specifically,
both <code class="highlighter-rouge">head</code> and <code class="highlighter-rouge">tail</code> are partial: they are only well-defined if it
has at least one element.</p>

<p><code class="highlighter-rouge">NonEmptyList</code> on the other hand, <em>guarantees</em> you that operations like
<code class="highlighter-rouge">head</code> and <code class="highlighter-rouge">tail</code> are defined, because constructing an empty
<code class="highlighter-rouge">NonEmptyList</code> is simply not possible!</p>

<h2 id="constructing-a-nonemptylist">Constructing a NonEmptyList</h2>

<p>To construct a <code class="highlighter-rouge">NonEmptyList</code> you have different possibilities.</p>

<h3 id="using-one">Using <code class="highlighter-rouge">one</code></h3>

<p>If you want to construct a collection with only one argument, use
<code class="highlighter-rouge">NonEmptyList.one</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">one</span><span class="o">(</span><span class="mi">42</span><span class="o">)</span>
<span class="c1">// res0: cats.data.NonEmptyList[Int] = NonEmptyList(42)
</span></code></pre>
</div>

<h3 id="using-of">Using <code class="highlighter-rouge">of</code></h3>

<p>The <code class="highlighter-rouge">NonEmptyList.of</code> method on the companion of <code class="highlighter-rouge">NonEmptyList</code> as the signature:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">of</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">head</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">tail</span><span class="k">:</span> <span class="kt">A*</span><span class="o">)</span><span class="k">:</span> <span class="kt">NonEmptyList</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
</code></pre>
</div>

<p>It accepts an argument list with at least one <code class="highlighter-rouge">A</code> followed by a
<em>varargs</em> argument for the <code class="highlighter-rouge">tail</code>.  Call it like this:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">of</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="c1">// res1: cats.data.NonEmptyList[Int] = NonEmptyList(1)
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
<span class="c1">// res2: cats.data.NonEmptyList[Int] = NonEmptyList(1, 2)
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
<span class="c1">// res3: cats.data.NonEmptyList[Int] = NonEmptyList(1, 2, 3, 4)
</span></code></pre>
</div>

<p>There also is <code class="highlighter-rouge">ofInitLast</code> which takes a normal <code class="highlighter-rouge">List[A]</code> for the
prefix and a last element:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">ofInitLast</span><span class="o">(</span><span class="nc">List</span><span class="o">(),</span> <span class="mi">4</span><span class="o">)</span>
<span class="c1">// res4: cats.data.NonEmptyList[Int] = NonEmptyList(4)
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">ofInitLast</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">),</span> <span class="mi">4</span><span class="o">)</span>
<span class="c1">// res5: cats.data.NonEmptyList[Int] = NonEmptyList(1, 2, 3, 4)
</span></code></pre>
</div>

<h3 id="using-fromlist">Using <code class="highlighter-rouge">fromList</code></h3>

<p>There is also <code class="highlighter-rouge">NonEmptyList.fromList</code> which returns an
<code class="highlighter-rouge">Option[NonEmptyList[A]]</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromList</span><span class="o">(</span><span class="nc">List</span><span class="o">())</span>
<span class="c1">// res6: Option[cats.data.NonEmptyList[Nothing]] = None
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromList</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">))</span>
<span class="c1">// res7: Option[cats.data.NonEmptyList[Int]] = Some(NonEmptyList(1, 2, 3))
</span></code></pre>
</div>

<p>Last but not least, there is <code class="highlighter-rouge">.toNel</code> if you import the syntax for
<code class="highlighter-rouge">list</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.syntax.list._</span>
<span class="c1">// import cats.syntax.list._
</span>
<span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">toNel</span>
<span class="c1">// res8: Option[cats.data.NonEmptyList[Int]] = Some(NonEmptyList(1, 2, 3))
</span></code></pre>
</div>

<h3 id="using-fromfoldable-and-fromreducible">Using <code class="highlighter-rouge">fromFoldable</code> and <code class="highlighter-rouge">fromReducible</code></h3>

<p>Even more general, you can use <code class="highlighter-rouge">NonEmptyList.fromFoldable</code> and
<code class="highlighter-rouge">NonEmptyList.fromReducible</code>.  The difference between the two is that
<code class="highlighter-rouge">fromReducible</code> can avoid the <code class="highlighter-rouge">Option</code> in the return type, because it
is only available for non-empty datastructures.</p>

<p>Here are some examples:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.implicits._</span>
<span class="c1">// import cats.implicits._
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromFoldable</span><span class="o">(</span><span class="nc">List</span><span class="o">())</span>
<span class="c1">// res9: Option[cats.data.NonEmptyList[Nothing]] = None
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromFoldable</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">))</span>
<span class="c1">// res10: Option[cats.data.NonEmptyList[Int]] = Some(NonEmptyList(1, 2, 3))
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromFoldable</span><span class="o">(</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">42</span><span class="o">))</span>
<span class="c1">// res11: Option[cats.data.NonEmptyList[Int]] = Some(NonEmptyList(42))
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromFoldable</span><span class="o">(</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">42</span><span class="o">))</span>
<span class="c1">// res12: Option[cats.data.NonEmptyList[Int]] = Some(NonEmptyList(42))
</span>
<span class="c1">// Everything that has a Foldable instance!
</span><span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromFoldable</span><span class="o">(</span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Int</span><span class="o">](</span><span class="s">"Error"</span><span class="o">))</span>
<span class="c1">// res14: Option[cats.data.NonEmptyList[Int]] = None
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromFoldable</span><span class="o">(</span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Int</span><span class="o">](</span><span class="mi">42</span><span class="o">))</span>
<span class="c1">// res15: Option[cats.data.NonEmptyList[Int]] = Some(NonEmptyList(42))
</span>
<span class="c1">// Avoid the Option for things with a `Reducible` instance
</span><span class="k">import</span> <span class="nn">cats.data.NonEmptyVector</span>
<span class="c1">// import cats.data.NonEmptyVector
</span>
<span class="nc">NonEmptyList</span><span class="o">.</span><span class="n">fromReducible</span><span class="o">(</span><span class="nc">NonEmptyVector</span><span class="o">.</span><span class="n">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">))</span>
<span class="c1">// res17: cats.data.NonEmptyList[Int] = NonEmptyList(1, 2, 3)
</span></code></pre>
</div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/cats/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'typelevel/cats'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/cats/js/main.js"></script></body></html>